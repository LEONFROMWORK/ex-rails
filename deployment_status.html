<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExcelApp Rails - Railway ë°°í¬ ìƒíƒœ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .status-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .status-card:hover {
            transform: translateY(-5px);
        }
        
        .status-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .status-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-size: 1.2rem;
        }
        
        .status-pending {
            background: #fef3c7;
            color: #d97706;
        }
        
        .status-success {
            background: #d1fae5;
            color: #059669;
        }
        
        .status-error {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .status-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .status-description {
            color: #6b7280;
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            transition: width 0.5s ease;
        }
        
        .links-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .links-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .link-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            text-decoration: none;
            color: #374151;
            transition: all 0.3s ease;
        }
        
        .link-item:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .link-icon {
            margin-right: 0.8rem;
            font-size: 1.2rem;
        }
        
        .refresh-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .refresh-btn:hover {
            transform: scale(1.1);
            background: #2563eb;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f4f6;
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .deployment-info {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            font-weight: 600;
            color: #374151;
        }
        
        .info-value {
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ExcelApp Rails</h1>
            <p>Railway ë°°í¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§</p>
        </div>
        
        <div class="deployment-info">
            <h2 class="links-title">ğŸ“Š ë°°í¬ ì •ë³´</h2>
            <div class="info-item">
                <span class="info-label">GitHub ì €ì¥ì†Œ:</span>
                <span class="info-value">LEONFROMWORK/ex-rails</span>
            </div>
            <div class="info-item">
                <span class="info-label">í”Œë«í¼:</span>
                <span class="info-value">Railway</span>
            </div>
            <div class="info-item">
                <span class="info-label">í”„ë ˆì„ì›Œí¬:</span>
                <span class="info-value">Ruby on Rails 8.0</span>
            </div>
            <div class="info-item">
                <span class="info-label">ë°ì´í„°ë² ì´ìŠ¤:</span>
                <span class="info-value">PostgreSQL + Redis</span>
            </div>
            <div class="info-item">
                <span class="info-label">ë°°í¬ ì‹œê°„:</span>
                <span class="info-value" id="deploy-time">ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì¤‘...</span>
            </div>
        </div>
        
        <div class="status-grid">
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon status-pending" id="project-icon">â³</div>
                    <div class="status-title">í”„ë¡œì íŠ¸ ìƒì„±</div>
                </div>
                <div class="status-description">Railwayì—ì„œ í”„ë¡œì íŠ¸ ìƒì„± ë° GitHub ì—°ê²°</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="project-progress" style="width: 0%"></div>
                </div>
                <div id="project-status">ëŒ€ê¸° ì¤‘...</div>
            </div>
            
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon status-pending" id="build-icon">â³</div>
                    <div class="status-title">ë¹Œë“œ ë° ë°°í¬</div>
                </div>
                <div class="status-description">ì˜ì¡´ì„± ì„¤ì¹˜, ì—ì…‹ ë¹Œë“œ, ì„œë²„ ì‹œì‘</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="build-progress" style="width: 0%"></div>
                </div>
                <div id="build-status">ëŒ€ê¸° ì¤‘...</div>
            </div>
            
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon status-pending" id="database-icon">â³</div>
                    <div class="status-title">ë°ì´í„°ë² ì´ìŠ¤</div>
                </div>
                <div class="status-description">PostgreSQL, Redis ì„œë¹„ìŠ¤ ì¶”ê°€</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="database-progress" style="width: 0%"></div>
                </div>
                <div id="database-status">ëŒ€ê¸° ì¤‘...</div>
            </div>
            
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon status-pending" id="health-icon">â³</div>
                    <div class="status-title">í—¬ìŠ¤ì²´í¬</div>
                </div>
                <div class="status-description">ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ í™•ì¸</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="health-progress" style="width: 0%"></div>
                </div>
                <div id="health-status">ëŒ€ê¸° ì¤‘...</div>
            </div>
        </div>
        
        <div class="links-section">
            <h2 class="links-title">ğŸ”— ìœ ìš©í•œ ë§í¬</h2>
            <div class="links-grid">
                <a href="https://railway.app/new" class="link-item" target="_blank">
                    <span class="link-icon">ğŸš€</span>
                    <span>Railway ìƒˆ í”„ë¡œì íŠ¸</span>
                </a>
                <a href="https://github.com/LEONFROMWORK/ex-rails" class="link-item" target="_blank">
                    <span class="link-icon">ğŸ“±</span>
                    <span>GitHub ì €ì¥ì†Œ</span>
                </a>
                <a href="https://railway.app/dashboard" class="link-item" target="_blank">
                    <span class="link-icon">ğŸ“Š</span>
                    <span>Railway ëŒ€ì‹œë³´ë“œ</span>
                </a>
                <a href="#" class="link-item" id="app-link" style="opacity: 0.5;">
                    <span class="link-icon">ğŸŒ</span>
                    <span>ì• í”Œë¦¬ì¼€ì´ì…˜ (ë°°í¬ í›„)</span>
                </a>
            </div>
        </div>
    </div>
    
    <button class="refresh-btn" onclick="refreshStatus()">ğŸ”„</button>
    
    <script>
        let deployStartTime = new Date();
        let appDomain = '';
        
        function updateDeployTime() {
            const now = new Date();
            const elapsed = Math.floor((now - deployStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('deploy-time').textContent = 
                `${minutes}ë¶„ ${seconds}ì´ˆ ê²½ê³¼`;
        }
        
        function updateStatus(step, status, progress) {
            const icon = document.getElementById(`${step}-icon`);
            const progressBar = document.getElementById(`${step}-progress`);
            const statusText = document.getElementById(`${step}-status`);
            
            if (status === 'success') {
                icon.className = 'status-icon status-success';
                icon.textContent = 'âœ…';
                progressBar.style.width = '100%';
            } else if (status === 'error') {
                icon.className = 'status-icon status-error';
                icon.textContent = 'âŒ';
            } else {
                progressBar.style.width = `${progress}%`;
            }
            
            statusText.textContent = getStatusText(step, status);
        }
        
        function getStatusText(step, status) {
            const messages = {
                project: {
                    success: 'í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ',
                    error: 'í”„ë¡œì íŠ¸ ìƒì„± ì‹¤íŒ¨',
                    default: 'í”„ë¡œì íŠ¸ ìƒì„± ì¤‘...'
                },
                build: {
                    success: 'ë¹Œë“œ ë° ë°°í¬ ì™„ë£Œ',
                    error: 'ë¹Œë“œ ì‹¤íŒ¨',
                    default: 'ë¹Œë“œ ì§„í–‰ ì¤‘...'
                },
                database: {
                    success: 'ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ì¶”ê°€ ì™„ë£Œ',
                    error: 'ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨',
                    default: 'ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ì¤‘...'
                },
                health: {
                    success: 'ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ìƒ ì‘ë™',
                    error: 'í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨',
                    default: 'í—¬ìŠ¤ì²´í¬ ì§„í–‰ ì¤‘...'
                }
            };
            
            return messages[step][status] || messages[step].default;
        }
        
        async function checkDeploymentStatus(domain) {
            if (!domain) return;
            
            try {
                // ê¸°ë³¸ ì—°ê²° í™•ì¸
                const response = await fetch(`https://${domain}`, { mode: 'no-cors' });
                updateStatus('project', 'success', 100);
                updateStatus('build', 'success', 100);
                
                // í—¬ìŠ¤ì²´í¬ í™•ì¸
                const healthResponse = await fetch(`https://${domain}/up`, { mode: 'no-cors' });
                updateStatus('health', 'success', 100);
                
                // ì•± ë§í¬ í™œì„±í™”
                const appLink = document.getElementById('app-link');
                appLink.href = `https://${domain}`;
                appLink.style.opacity = '1';
                
            } catch (error) {
                console.log('ë°°í¬ ì§„í–‰ ì¤‘...', error);
            }
        }
        
        function refreshStatus() {
            // ë„ë©”ì¸ ì…ë ¥ ë°›ê¸°
            const domain = prompt('Railwayì—ì„œ ìƒì„±ëœ ë„ë©”ì¸ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: your-app.railway.app):');
            if (domain) {
                appDomain = domain;
                checkDeploymentStatus(domain);
            }
        }
        
        // ì‹œë®¬ë ˆì´ì…˜ - ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì‹¤ì œ API í˜¸ì¶œë¡œ ëŒ€ì²´
        function simulateDeployment() {
            setTimeout(() => updateStatus('project', 'success', 100), 2000);
            setTimeout(() => updateStatus('build', 'loading', 50), 4000);
            setTimeout(() => updateStatus('build', 'success', 100), 8000);
            setTimeout(() => updateStatus('database', 'success', 100), 10000);
            setTimeout(() => updateStatus('health', 'loading', 75), 12000);
            setTimeout(() => updateStatus('health', 'success', 100), 15000);
        }
        
        // íƒ€ì´ë¨¸ ì‹œì‘
        setInterval(updateDeployTime, 1000);
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€
        window.addEventListener('load', () => {
            alert('Railway ëŒ€ì‹œë³´ë“œì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ í›„, ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë„ë©”ì¸ì„ ì…ë ¥í•˜ì„¸ìš”!');
        });
    </script>
</body>
</html>